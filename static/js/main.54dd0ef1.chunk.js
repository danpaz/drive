(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,n){e.exports=n(213)},129:function(e,t,n){},130:function(e,t,n){},174:function(e,t){},175:function(e,t){},176:function(e,t){},213:function(e,t,n){"use strict";n.r(t);var i=n(11),o=n.n(i),a=n(102),r=n.n(a),s=(n(129),n(81)),l=n(1),u=n(2),c=n(8),d=n(5),h=n(9),g=(n(130),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){for(var e=this.props,t=e.routeResult,n=e.distanceAlongGeometry,i=e.currentRouteStepIndex,a=t.legs[0].steps[i],r=a.distance-n,s=a.bannerInstructions[0],l=0;l<a.bannerInstructions.length;l++)a.bannerInstructions[l].distanceAlongGeometry>r&&(s=a.bannerInstructions[l]);return o.a.createElement("div",{className:"banner"},o.a.createElement("div",{className:"primary"},s.primary.text),o.a.createElement("div",{className:"secondary"},s.secondary&&s.secondary.text))}}]),t}(i.Component));var m=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,n=this.props,i=n.routeResult,a=n.onClickStartNavigation,r=n.onClickStartSimulation,s=n.onClickCancelNavigation,l=n.isNavigating,u=(e=i.duration,{value:Math.round(e/60),unit:"min"}),c=(t=i.distance,{value:Math.round(t/1e3),unit:"km"});return o.a.createElement("div",null,l?o.a.createElement("button",{onClick:s},"Cancel"):o.a.createElement("div",null,o.a.createElement("div",null,u.value," ",u.unit," (",c.value," ",c.unit,")"),o.a.createElement("div",null,o.a.createElement("button",{onClick:a},"Start"),o.a.createElement("button",{onClick:r},"Simulate"))))}}]),t}(i.Component),p=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.searchResult,n=e.onClick;return o.a.createElement("div",null,o.a.createElement("div",null,t.text),o.a.createElement("div",null,t.properties.address),o.a.createElement("button",{onClick:n},"Directions"))}}]),t}(i.Component),v=n(80),f=n(104),w=n.n(f),y=n(57),R=(n(187),n(67)),b=n.n(R),S=n(108),C=n.n(S),j=n(109),k=n.n(j),N=n(39),I=n(82),E=n.n(I),P=n(110),O=n.n(P),L=n(211),x=C()({accessToken:"pk.eyJ1IjoiZGFucGF6IiwiYSI6ImNqMjVpYmk5czAwN2sycXBjYmd0eGNrdjkifQ.WLg6LD184VYKYQPbW7NY7w"}),W=k()(x);function G(e,t,n){var i=t/1e3/1e3,o=0;return setInterval(function(){o<1e3&&function(){o+=1;var t=O()(e,o*i,{units:"kilometers"});n({coords:{longitude:t.geometry.coordinates[0],latitude:t.geometry.coordinates[1]},timestamp:Date.now()})}()},100)}var z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={viewport:{width:400,height:600,latitude:38.8980586,longitude:-77.1876467,zoom:16,maxZoom:18,transitionDuration:1e3},geolocationWatcher:null,currentPosition:{latitude:38.8980586,longitude:-77.1876467},currentPositionLayer:new y.a({id:"current-position",data:{type:"Point",coordinates:[-77.1876467,38.8980586]},getFillColor:[255,255,255,255],getRadius:5,pointRadiusMinPixels:5}),currentRouteStepIndex:0,searchResult:null,searchResultLayer:null,routeResult:null,routeResultLayer:null,isNavigating:!1,simulationIntervalId:null},n.mapRef=o.a.createRef(),n.resize=function(){n.handleViewportChange({width:window.innerWidth,height:window.innerHeight-100})},n.handleViewportChange=function(e){n.setState({viewport:Object(s.a)({},n.state.viewport,e)})},n.handleSearchResult=function(e){n.setState({routeResult:null,routeResultLayer:null,searchResult:e.result,searchResultLayer:new y.a({id:"search-result",data:e.result.geometry,getFillColor:[160,160,180,200],getRadius:5,pointRadiusMinPixels:5})})},n.handleSearchClear=function(e){n.setState({searchResult:null,searchResultLayer:null,routeResult:null,routeResultLayer:null})},n.handleGetDirections=function(e){new Promise(function(e,t){e({coords:{latitude:38.8980586,longitude:-77.1876467}})}).then(function(e){return n.setState({currentPosition:{longitude:e.coords.longitude,latitude:e.coords.latitude,lastupdated:e.timestamp},currentPositionLayer:new y.a({id:"current-position",data:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]},getFillColor:[255,255,255,255],getRadius:5,pointRadiusMinPixels:5})})}).then(function(){return function(e,t){var n={profile:"driving-traffic",geometries:"geojson",overview:"full",steps:!0,bannerInstructions:!0,waypoints:[{coordinates:e},{coordinates:t}]};return W.getDirections(n).send().then(function(e){return e.body.routes})}([n.state.currentPosition.longitude,n.state.currentPosition.latitude],n.state.searchResult.center)}).then(function(e){return n.setState({routeResult:e[0],routeResultLayer:new y.a({id:"route-result",data:e[0].geometry,lineWidthMinPixels:3,getLineColor:[66,100,251,255],getLineWidth:5})})}).then(function(){var e=n.state.routeResult.geometry.coordinates,t=e.reduce(function(e,t){return e.extend(t)},new b.a.LngLatBounds(e[0],e[0])),i=L.viewport([t.getWest(),t.getSouth(),t.getEast(),t.getNorth()],[400,400]);n.handleViewportChange({longitude:i.center[0],latitude:i.center[1],zoom:i.zoom})}).catch(function(e){return console.error(e)})},n.handleNewPositionSuccess=function(e){var t,i=n.state.currentRouteStepIndex||0,o=n.state.routeResult.legs[0].steps[i],a=n.state.routeResult.legs[0].steps[i+1],r=E()(o.geometry,N.point([e.coords.longitude,e.coords.latitude])),l=E()(a.geometry,N.point([e.coords.longitude,e.coords.latitude]));l.properties.dist<r.properties.dist&&l.properties.location<.05?(t=l,i+=1):t=r;var u=1e3*t.properties.location;n.setState({viewport:Object(s.a)({},n.state.viewport,{longitude:e.coords.longitude,latitude:e.coords.latitude,zoom:16}),currentPosition:{longitude:e.coords.longitude,latitude:e.coords.latitude,lastupdated:e.timestamp},currentRouteStepIndex:i,distanceAlongGeometry:u,currentPositionLayer:new y.a({id:"current-position",data:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]},getFillColor:[255,255,255,255],getRadius:5,pointRadiusMinPixels:5})})},n.handleNewPositionError=function(e){console.error(e)},n.handleStartNavigation=function(){var e,t,i=(e=n.handleNewPositionSuccess,t=n.handleNewPositionError,navigator.geolocation.watchPosition(e,t,{enableHighAccuracy:!0,maximumAge:5e3}));n.setState({isNavigating:!0,geolocationWatcher:i})},n.handleStartSimulation=function(){var e=n.state.routeResult,t=G(e.geometry,e.distance,n.handleNewPositionSuccess);n.setState({isNavigating:!0,simulationIntervalId:t})},n.handleCancelNavigation=function(){clearInterval(n.state.simulationIntervalId),n.setState({isNavigating:!1,simulationIntervalId:null})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize),this.resize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var e,t=this.state,n=t.viewport,i=t.searchResult,a=t.searchResultLayer,r=t.routeResult,s=t.routeResultLayer,l=t.currentPosition,u=t.currentPositionLayer,c=t.currentRouteStepIndex,d=t.distanceAlongGeometry,h=t.isNavigating;return i&&!r?e=o.a.createElement(p,{searchResult:i,onClick:this.handleGetDirections}):r&&(e=o.a.createElement(m,{routeResult:r,isNavigating:h,onClickStartNavigation:this.handleStartNavigation,onClickStartSimulation:this.handleStartSimulation,onClickCancelNavigation:this.handleCancelNavigation})),o.a.createElement(o.a.Fragment,null,h&&r&&o.a.createElement(g,{routeResult:r,distanceAlongGeometry:d,currentRouteStepIndex:c}),o.a.createElement(v.default,Object.assign({mapStyle:"mapbox://styles/mapbox/navigation-guidance-day-v4",ref:this.mapRef},n,{onViewportChange:this.handleViewportChange}),!h&&o.a.createElement(w.a,{mapRef:this.mapRef,onViewportChange:this.handleViewportChange,onResult:this.handleSearchResult,onClear:this.handleSearchClear,mapboxApiAccessToken:"pk.eyJ1IjoiZGFucGF6IiwiYSI6ImNqMjVpYmk5czAwN2sycXBjYmd0eGNrdjkifQ.WLg6LD184VYKYQPbW7NY7w",proximity:l,position:"top-left",placeholder:"Where to?..."}),o.a.createElement(y.b,Object.assign({},n,{layers:[a,s,u]}))),e)}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,1,2]]]);
//# sourceMappingURL=main.54dd0ef1.chunk.js.map